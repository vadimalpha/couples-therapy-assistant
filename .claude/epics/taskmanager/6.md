---
name: Focus Mode Views
status: open
created: 2025-08-26T18:29:07Z
updated: 2025-08-26T20:52:21Z
github: https://github.com/vadimalpha/taskmanager/issues/6
depends_on: [004]
parallel: true
conflicts_with: [006]
---

# Task: Focus Mode Views

## Description
Implement specialized focus modes (Daily, Deep Work, Planning, Break) with unique interfaces designed for different work contexts and mental states. Each mode provides optimized task views, UI customizations, and specific workflows to enhance productivity and well-being.

## Detailed Implementation Specification

### 1. Focus Mode Types and State Management

#### Update `types/focus.ts`:
```typescript
export type FocusMode = 'daily' | 'deep' | 'planning' | 'break'

export interface FocusModeConfig {
  id: FocusMode
  name: string
  description: string
  icon: string
  color: string
  backgroundGradient: string
  textColor: string
  features: string[]
  defaultDuration?: number // minutes
  maxTasks?: number
  showTimer: boolean
  showCompleted: boolean
  showProjects: boolean
  showCalendar: boolean
  allowInterruptions: boolean
  uiDensity: 'compact' | 'comfortable' | 'spacious'
  sounds?: {
    start?: string
    break?: string
    complete?: string
  }
}

export interface FocusSession {
  id: string
  user_id: string
  mode: FocusMode
  started_at: string
  planned_duration: number // minutes
  actual_duration?: number
  task_id?: string
  productivity_rating?: number
  interruption_count: number
  notes?: string
  completed: boolean
}

export interface FocusStats {
  totalSessions: number
  totalMinutes: number
  averageProductivity: number
  streakDays: number
  preferredMode: FocusMode
  peakHours: number[]
}
```

#### Update `stores/focusStore.ts`:
```typescript
import { create } from 'zustand'
import { devtools, persist } from 'zustand/middleware'
import { FocusMode, FocusModeConfig, FocusSession } from '@/types/focus'

interface FocusState {
  // Current session
  currentMode: FocusMode
  isInSession: boolean
  sessionStartTime: Date | null
  sessionDuration: number // planned duration in minutes
  elapsedTime: number // current elapsed time in seconds
  isPaused: boolean
  sessionId: string | null
  targetTaskId: string | null
  
  // UI State
  isTimerVisible: boolean
  showModeSelector: boolean
  lastModeSwitch: Date | null
  sessionNotes: string
  
  // Settings
  autoStartBreaks: boolean
  breakReminderInterval: number // minutes
  soundEnabled: boolean
  
  // Statistics
  dailyStats: {
    sessionsCompleted: number
    totalFocusTime: number
    tasksCompleted: number
    interruptions: number
  }
  
  // Actions
  setMode: (mode: FocusMode) => void
  startSession: (duration?: number, taskId?: string) => void
  pauseSession: () => void
  resumeSession: () => void
  endSession: (rating?: number) => void
  updateElapsedTime: () => void
  setSessionNotes: (notes: string) => void
  toggleTimer: () => void
  setTargetTask: (taskId: string | null) => void
  incrementInterruption: () => void
  resetDailyStats: () => void
}

export const useFocusStore = create<FocusState>()(
  devtools(
    persist(
      (set, get) => ({
        // Initial state
        currentMode: 'daily',
        isInSession: false,
        sessionStartTime: null,
        sessionDuration: 25, // default Pomodoro
        elapsedTime: 0,
        isPaused: false,
        sessionId: null,
        targetTaskId: null,
        isTimerVisible: false,
        showModeSelector: false,
        lastModeSwitch: null,
        sessionNotes: '',
        autoStartBreaks: true,
        breakReminderInterval: 25,
        soundEnabled: true,
        dailyStats: {
          sessionsCompleted: 0,
          totalFocusTime: 0,
          tasksCompleted: 0,
          interruptions: 0,
        },
        
        // Actions
        setMode: (mode) => set({ 
          currentMode: mode, 
          lastModeSwitch: new Date(),
          // Reset session when switching modes
          isInSession: false,
          sessionStartTime: null,
          elapsedTime: 0,
          isPaused: false,
          sessionId: null,
          targetTaskId: null,
        }),
        
        startSession: (duration, taskId) => {
          const sessionId = `session-${Date.now()}`
          set({
            isInSession: true,
            sessionStartTime: new Date(),
            sessionDuration: duration || get().sessionDuration,
            elapsedTime: 0,
            isPaused: false,
            sessionId,
            targetTaskId: taskId || null,
            sessionNotes: '',
          })
        },
        
        pauseSession: () => set({ isPaused: true }),
        
        resumeSession: () => set({ isPaused: false }),
        
        endSession: (rating) => {
          const state = get()
          const duration = Math.floor(state.elapsedTime / 60)
          
          set((prev) => ({
            isInSession: false,
            sessionStartTime: null,
            elapsedTime: 0,
            isPaused: false,
            sessionId: null,
            targetTaskId: null,
            sessionNotes: '',
            dailyStats: {
              ...prev.dailyStats,
              sessionsCompleted: prev.dailyStats.sessionsCompleted + 1,
              totalFocusTime: prev.dailyStats.totalFocusTime + duration,
            }
          }))
          
          // Store session data
          // This would typically be saved to the database
          console.log('Session ended:', {
            duration,
            rating,
            mode: state.currentMode,
            taskId: state.targetTaskId,
          })
        },
        
        updateElapsedTime: () => {
          const state = get()
          if (state.isInSession && !state.isPaused && state.sessionStartTime) {
            const elapsed = Math.floor((Date.now() - state.sessionStartTime.getTime()) / 1000)
            set({ elapsedTime: elapsed })
            
            // Auto-end session when time is up
            if (elapsed >= state.sessionDuration * 60) {
              get().endSession()
            }
          }
        },
        
        setSessionNotes: (notes) => set({ sessionNotes: notes }),
        
        toggleTimer: () => set((state) => ({ isTimerVisible: !state.isTimerVisible })),
        
        setTargetTask: (taskId) => set({ targetTaskId: taskId }),
        
        incrementInterruption: () => set((state) => ({
          dailyStats: {
            ...state.dailyStats,
            interruptions: state.dailyStats.interruptions + 1,
          }
        })),
        
        resetDailyStats: () => set({
          dailyStats: {
            sessionsCompleted: 0,
            totalFocusTime: 0,
            tasksCompleted: 0,
            interruptions: 0,
          }
        }),
      }),
      {
        name: 'focus-store',
        partialize: (state) => ({
          currentMode: state.currentMode,
          autoStartBreaks: state.autoStartBreaks,
          breakReminderInterval: state.breakReminderInterval,
          soundEnabled: state.soundEnabled,
          dailyStats: state.dailyStats,
        }),
      }
    ),
    { name: 'FocusStore' }
  )
)
```

### 2. Focus Mode Configurations

#### Create `lib/focusModes.ts`:
```typescript
import { FocusModeConfig } from '@/types/focus'

export const FOCUS_MODES: Record<string, FocusModeConfig> = {
  daily: {
    id: 'daily',
    name: 'Daily Focus',
    description: 'Your prioritized tasks for today with balanced productivity',
    icon: 'sun',
    color: '#3b82f6',
    backgroundGradient: 'from-blue-50 to-indigo-50',
    textColor: 'text-blue-900',
    features: [
      'Today\'s priority tasks',
      'Smart task suggestions',
      'Progress tracking',
      'Balanced workload'
    ],
    defaultDuration: 25,
    maxTasks: 5,
    showTimer: true,
    showCompleted: true,
    showProjects: true,
    showCalendar: false,
    allowInterruptions: true,
    uiDensity: 'comfortable',
    sounds: {
      start: '/sounds/chime-start.mp3',
      break: '/sounds/bell-break.mp3',
      complete: '/sounds/success.mp3',
    }
  },
  
  deep: {
    id: 'deep',
    name: 'Deep Work',
    description: 'Distraction-free environment for intensive focus sessions',
    icon: 'brain',
    color: '#7c3aed',
    backgroundGradient: 'from-purple-50 to-violet-50',
    textColor: 'text-purple-900',
    features: [
      'Minimal distractions',
      'Single task focus',
      'Extended time blocks',
      'Flow state optimization'
    ],
    defaultDuration: 90,
    maxTasks: 1,
    showTimer: true,
    showCompleted: false,
    showProjects: false,
    showCalendar: false,
    allowInterruptions: false,
    uiDensity: 'spacious',
    sounds: {
      start: '/sounds/deep-start.mp3',
      complete: '/sounds/accomplishment.mp3',
    }
  },
  
  planning: {
    id: 'planning',
    name: 'Planning Mode',
    description: 'Strategic overview for organizing and scheduling your work',
    icon: 'calendar',
    color: '#059669',
    backgroundGradient: 'from-emerald-50 to-green-50',
    textColor: 'text-emerald-900',
    features: [
      'Calendar integration',
      'Project overview',
      'Task scheduling',
      'Strategic thinking'
    ],
    defaultDuration: 30,
    maxTasks: 20,
    showTimer: false,
    showCompleted: true,
    showProjects: true,
    showCalendar: true,
    allowInterruptions: true,
    uiDensity: 'compact',
  },
  
  break: {
    id: 'break',
    name: 'Break Time',
    description: 'Gentle interface for rest and mindful recovery',
    icon: 'coffee',
    color: '#ea580c',
    backgroundGradient: 'from-orange-50 to-amber-50',
    textColor: 'text-orange-900',
    features: [
      'Wellness suggestions',
      'Gentle reminders',
      'Breathing exercises',
      'Mindful activities'
    ],
    defaultDuration: 15,
    maxTasks: 0,
    showTimer: true,
    showCompleted: false,
    showProjects: false,
    showCalendar: false,
    allowInterruptions: false,
    uiDensity: 'spacious',
    sounds: {
      start: '/sounds/calm-start.mp3',
      complete: '/sounds/gentle-chime.mp3',
    }
  }
}

export function getFocusModeConfig(mode: string): FocusModeConfig {
  return FOCUS_MODES[mode] || FOCUS_MODES.daily
}

export function getFocusModeIcon(mode: string): string {
  const icons = {
    daily: 'Sun',
    deep: 'Brain',
    planning: 'Calendar',
    break: 'Coffee',
  }
  return icons[mode] || 'Circle'
}
```

### 3. Deep Work Mode View

#### Create `components/focus/DeepWorkView.tsx`:
```typescript
'use client'

import { useFocusMode } from '@/hooks/useFocusMode'
import { FocusTimer } from './FocusTimer'
import { Card, CardContent } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { Skeleton } from '@/components/ui/skeleton'
import { 
  Brain,
  Focus,
  Timer,
  Target,
  CheckCircle,
  AlertTriangle,
  Volume2,
  VolumeX,
} from 'lucide-react'
import { cn } from '@/lib/utils'

export function DeepWorkView() {
  const { 
    tasks, 
    isLoadingTasks, 
    currentConfig,
    targetTaskId,
    setTargetTask,
    isInSession,
    dailyStats,
  } = useFocusMode()
  
  // Get the single most important task for deep work
  const deepWorkTask = tasks.find(task => task.id === targetTaskId) || tasks[0]
  
  if (isLoadingTasks) {
    return (
      <div className={cn(
        'min-h-screen p-6',
        `bg-gradient-to-br ${currentConfig.backgroundGradient}`
      )}>
        <div className="max-w-4xl mx-auto space-y-6">
          <Skeleton className="h-8 w-64" />
          <Skeleton className="h-96" />
        </div>
      </div>
    )
  }
  
  return (
    <div className={cn(
      'min-h-screen p-6',
      `bg-gradient-to-br ${currentConfig.backgroundGradient}`
    )}>
      <div className="max-w-4xl mx-auto space-y-6">
        {/* Minimal Header */}
        <div className="flex items-center justify-center">
          <div className="flex items-center space-x-3">
            <div className={cn(
              'p-3 rounded-full',
              'bg-white bg-opacity-20 backdrop-blur-sm'
            )}>
              <Brain className={cn('h-8 w-8', currentConfig.textColor)} />
            </div>
            <div className="text-center">
              <h1 className={cn('text-3xl font-bold', currentConfig.textColor)}>
                Deep Work
              </h1>
              <p className="text-sm opacity-75">
                Focus on what matters most
              </p>
            </div>
          </div>
        </div>
        
        {/* Main Focus Area */}
        {deepWorkTask ? (
          <div className="space-y-6">
            {/* Primary Task Card */}
            <Card className="bg-white bg-opacity-30 backdrop-blur-sm border-white border-opacity-30 shadow-2xl">
              <CardContent className="p-8">
                <div className="text-center space-y-6">
                  {/* Task Focus Indicator */}
                  <div className="flex justify-center">
                    <Badge 
                      className={cn(
                        'px-4 py-2 text-sm',
                        'bg-white bg-opacity-20 backdrop-blur-sm'
                      )}
                    >
                      <Target className="h-4 w-4 mr-2" />
                      Focus Target
                    </Badge>
                  </div>
                  
                  {/* Task Title */}
                  <div>
                    <h2 className={cn(
                      'text-2xl md:text-3xl font-bold mb-4',
                      currentConfig.textColor
                    )}>
                      {deepWorkTask.title}
                    </h2>
                    
                    {deepWorkTask.description && (
                      <p className="text-lg text-gray-700 leading-relaxed max-w-2xl mx-auto">
                        {deepWorkTask.description}
                      </p>
                    )}
                  </div>
                  
                  {/* Task Meta Information */}
                  <div className="flex items-center justify-center space-x-6 text-sm">
                    <div className="flex items-center space-x-2">
                      <Badge 
                        variant="outline"
                        className={cn(
                          'border-current',
                          deepWorkTask.priority === 'urgent' && 'text-red-600 border-red-300',
                          deepWorkTask.priority === 'high' && 'text-orange-600 border-orange-300',
                          deepWorkTask.priority === 'medium' && 'text-blue-600 border-blue-300',
                          deepWorkTask.priority === 'low' && 'text-gray-600 border-gray-300'
                        )}
                      >
                        {deepWorkTask.priority.charAt(0).toUpperCase() + deepWorkTask.priority.slice(1)} Priority
                      </Badge>
                    </div>
                    
                    {deepWorkTask.estimated_minutes && (
                      <div className="flex items-center space-x-1 text-gray-600">
                        <Timer className="h-4 w-4" />
                        <span>{deepWorkTask.estimated_minutes} min estimated</span>
                      </div>
                    )}
                    
                    {deepWorkTask.due_date && (
                      <div className={cn(
                        'flex items-center space-x-1',
                        deepWorkTask.overdue && 'text-red-600',
                        deepWorkTask.dueToday && 'text-orange-600'
                      )}>
                        {deepWorkTask.overdue && <AlertTriangle className="h-4 w-4" />}
                        <span>
                          Due {deepWorkTask.dueToday ? 'today' : 
                               new Date(deepWorkTask.due_date).toLocaleDateString()}
                        </span>
                      </div>
                    )}
                  </div>
                  
                  {/* Action Buttons */}
                  {!isInSession && (
                    <div className="flex justify-center space-x-4">
                      <Button
                        onClick={() => setTargetTask(deepWorkTask.id)}
                        variant="outline"
                        className="bg-white bg-opacity-20 backdrop-blur-sm border-white border-opacity-30"
                      >
                        <Focus className="h-4 w-4 mr-2" />
                        Set as Focus Target
                      </Button>
                    </div>
                  )}
                </div>
              </CardContent>
            </Card>
            
            {/* Timer Section */}
            <div className="flex justify-center">
              <div className="w-full max-w-md">
                <FocusTimer />
              </div>
            </div>
            
            {/* Minimal Progress Stats */}
            <div className="text-center">
              <Card className="bg-white bg-opacity-20 backdrop-blur-sm border-white border-opacity-30 inline-block">
                <CardContent className="p-4">
                  <div className="flex items-center space-x-6 text-sm">
                    <div className="text-center">
                      <div className="font-bold text-lg">
                        {Math.floor(dailyStats.totalFocusTime / 60)}h {dailyStats.totalFocusTime % 60}m
                      </div>
                      <div className="text-xs opacity-75">Today's Focus</div>
                    </div>
                    
                    <div className="w-px h-8 bg-white bg-opacity-30" />
                    
                    <div className="text-center">
                      <div className="font-bold text-lg">
                        {dailyStats.sessionsCompleted}
                      </div>
                      <div className="text-xs opacity-75">Sessions</div>
                    </div>
                    
                    <div className="w-px h-8 bg-white bg-opacity-30" />
                    
                    <div className="text-center">
                      <div className="font-bold text-lg">
                        {dailyStats.interruptions}
                      </div>
                      <div className="text-xs opacity-75">Interruptions</div>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        ) : (
          /* No Task Available */
          <div className="text-center py-16">
            <Card className="bg-white bg-opacity-20 backdrop-blur-sm border-white border-opacity-30 max-w-md mx-auto">
              <CardContent className="p-8">
                <Brain className="h-16 w-16 mx-auto text-gray-400 mb-4" />
                <h3 className="text-xl font-medium text-gray-700 mb-2">
                  No tasks ready for deep work
                </h3>
                <p className="text-gray-600 mb-6">
                  Create a high-priority task to start your deep work session.
                </p>
                <Button className="bg-purple-600 hover:bg-purple-700 text-white">
                  Create Task
                </Button>
              </CardContent>
            </Card>
          </div>
        )}
      </div>
    </div>
  )
}
```

### 4. Break Mode View

#### Create `components/focus/BreakView.tsx`:
```typescript
'use client'

import { useState, useEffect } from 'react'
import { useFocusMode } from '@/hooks/useFocusMode'
import { Card, CardContent } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { 
  Coffee,
  Wind,
  Heart,
  Sun,
  Leaf,
  Smile,
  Timer,
  RotateCcw,
  Play,
} from 'lucide-react'
import { cn } from '@/lib/utils'

const WELLNESS_ACTIVITIES = [
  {
    icon: Wind,
    title: 'Deep Breathing',
    description: 'Take 5 deep breaths to center yourself',
    duration: '2 min',
    action: 'Start Breathing Exercise',
  },
  {
    icon: Sun,
    title: 'Stretch Break',
    description: 'Gentle stretches for neck, shoulders, and back',
    duration: '5 min',
    action: 'View Stretches',
  },
  {
    icon: Heart,
    title: 'Mindful Moment',
    description: 'Brief meditation to reset your mind',
    duration: '3 min',
    action: 'Start Meditation',
  },
  {
    icon: Leaf,
    title: 'Walk Outside',
    description: 'Get fresh air and natural light',
    duration: '10 min',
    action: 'Set Reminder',
  },
]

const MOTIVATIONAL_QUOTES = [
  "Rest when you're weary. Refresh and renew yourself, your body, your mind, your spirit.",
  "Taking breaks is not a sign of weakness. It's a sign of wisdom.",
  "The time you enjoy wasting is never wasted time.",
  "Sometimes the most productive thing you can do is relax.",
  "Rest is not idleness. It is the key to greater productivity.",
  "Your mind needs rest as much as your body does.",
  "A break is not a luxury, it's a necessity for sustained performance.",
]

export function BreakView() {
  const { 
    currentConfig,
    isInSession,
    elapsedTime,
    timeRemaining,
    startSession,
    endSession,
    dailyStats,
  } = useFocusMode()
  
  const [currentQuote, setCurrentQuote] = useState('')
  const [breathingCount, setBreathingCount] = useState(0)
  const [isBreathing, setIsBreathing] = useState(false)
  
  // Rotate quotes every 30 seconds
  useEffect(() => {
    const getRandomQuote = () => {
      const randomIndex = Math.floor(Math.random() * MOTIVATIONAL_QUOTES.length)
      return MOTIVATIONAL_QUOTES[randomIndex]
    }
    
    setCurrentQuote(getRandomQuote())
    
    const interval = setInterval(() => {
      setCurrentQuote(getRandomQuote())
    }, 30000)
    
    return () => clearInterval(interval)
  }, [])
  
  // Breathing exercise
  const startBreathingExercise = () => {
    setIsBreathing(true)
    setBreathingCount(0)
    
    const breathingCycle = () => {
      setBreathingCount(prev => {
        const newCount = prev + 1
        if (newCount >= 10) { // 5 complete breath cycles (in + out)
          setIsBreathing(false)
          return 0
        }
        return newCount
      })
    }
    
    const interval = setInterval(breathingCycle, 4000) // 4 seconds per breath phase
    
    setTimeout(() => {
      clearInterval(interval)
      setIsBreathing(false)
      setBreathingCount(0)
    }, 40000) // 40 seconds total
  }
  
  return (
    <div className={cn(
      'min-h-screen p-6',
      `bg-gradient-to-br ${currentConfig.backgroundGradient}`
    )}>
      <div className="max-w-4xl mx-auto space-y-8">
        {/* Header */}
        <div className="text-center space-y-4">
          <div className="flex justify-center">
            <div className={cn(
              'p-4 rounded-full',
              'bg-white bg-opacity-20 backdrop-blur-sm'
            )}>
              <Coffee className={cn('h-10 w-10', currentConfig.textColor)} />
            </div>
          </div>
          
          <div>
            <h1 className={cn('text-3xl font-bold', currentConfig.textColor)}>
              Break Time
            </h1>
            <p className="text-lg opacity-75">
              Take a moment to rest and recharge
            </p>
          </div>
          
          {/* Stats Summary */}
          <div className="flex justify-center">
            <Card className="bg-white bg-opacity-20 backdrop-blur-sm border-white border-opacity-30">
              <CardContent className="p-4">
                <div className="flex items-center space-x-6 text-sm">
                  <div className="text-center">
                    <div className="font-bold text-lg">
                      {dailyStats.sessionsCompleted}
                    </div>
                    <div className="text-xs opacity-75">Sessions Today</div>
                  </div>
                  
                  <div className="w-px h-6 bg-white bg-opacity-30" />
                  
                  <div className="text-center">
                    <div className="font-bold text-lg">
                      {Math.floor(dailyStats.totalFocusTime / 60)}h {dailyStats.totalFocusTime % 60}m
                    </div>
                    <div className="text-xs opacity-75">Focus Time</div>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>
        
        {/* Break Timer */}
        {isInSession ? (
          <div className="text-center space-y-6">
            <Card className="bg-white bg-opacity-30 backdrop-blur-sm border-white border-opacity-30 max-w-md mx-auto">
              <CardContent className="p-8">
                <div className="space-y-4">
                  <Timer className="h-8 w-8 mx-auto text-gray-600" />
                  
                  <div className="text-4xl font-mono font-bold text-gray-800">
                    {Math.floor(timeRemaining / 60).toString().padStart(2, '0')}:
                    {(timeRemaining % 60).toString().padStart(2, '0')}
                  </div>
                  
                  <p className="text-sm text-gray-600">
                    Break time remaining
                  </p>
                  
                  <Button
                    onClick={() => endSession(5)} // Always rate break as excellent
                    variant="outline"
                    className="bg-white bg-opacity-20 backdrop-blur-sm"
                  >
                    <Play className="h-4 w-4 mr-2" />
                    End Break Early
                  </Button>
                </div>
              </CardContent>
            </Card>
          </div>
        ) : (
          <div className="space-y-8">
            {/* Motivational Quote */}
            <div className="text-center">
              <Card className="bg-white bg-opacity-30 backdrop-blur-sm border-white border-opacity-30 max-w-2xl mx-auto">
                <CardContent className="p-8">
                  <div className="space-y-4">
                    <Smile className="h-8 w-8 mx-auto text-orange-500" />
                    <blockquote className="text-lg italic text-gray-700 leading-relaxed">
                      "{currentQuote}"
                    </blockquote>
                  </div>
                </CardContent>
              </Card>
            </div>
            
            {/* Wellness Activities */}
            <div className="space-y-4">
              <h2 className={cn('text-xl font-semibold text-center', currentConfig.textColor)}>
                Wellness Activities
              </h2>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {WELLNESS_ACTIVITIES.map((activity, index) => (
                  <Card
                    key={index}
                    className="bg-white bg-opacity-20 backdrop-blur-sm border-white border-opacity-30 hover:bg-opacity-30 transition-all cursor-pointer"
                  >
                    <CardContent className="p-6">
                      <div className="flex items-start space-x-4">
                        <div className="p-2 rounded-full bg-orange-100">
                          <activity.icon className="h-5 w-5 text-orange-600" />
                        </div>
                        
                        <div className="flex-1 space-y-2">
                          <div className="flex items-center justify-between">
                            <h3 className="font-medium text-gray-800">
                              {activity.title}
                            </h3>
                            <Badge variant="secondary" className="text-xs">
                              {activity.duration}
                            </Badge>
                          </div>
                          
                          <p className="text-sm text-gray-600">
                            {activity.description}
                          </p>
                          
                          <Button
                            size="sm"
                            variant="outline"
                            className="text-xs"
                            onClick={() => {
                              if (activity.title === 'Deep Breathing') {
                                startBreathingExercise()
                              }
                            }}
                          >
                            {activity.action}
                          </Button>
                        </div>
                      </div>
                    </CardContent>
                  </Card>
                ))}
              </div>
            </div>
            
            {/* Breathing Exercise */}
            {isBreathing && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <Card className="bg-white max-w-sm mx-4">
                  <CardContent className="p-8 text-center">
                    <div className="space-y-6">
                      <Wind className="h-12 w-12 mx-auto text-blue-500" />
                      
                      <div>
                        <h3 className="text-lg font-semibold mb-2">
                          Deep Breathing
                        </h3>
                        <div className="text-2xl font-bold text-blue-600">
                          {breathingCount % 2 === 0 ? 'Breathe In' : 'Breathe Out'}
                        </div>
                        <div className="text-sm text-gray-600 mt-2">
                          {Math.floor(breathingCount / 2) + 1} of 5 breaths
                        </div>
                      </div>
                      
                      {/* Breathing Animation Circle */}
                      <div className="flex justify-center">
                        <div 
                          className={cn(
                            'w-24 h-24 rounded-full border-4 border-blue-300 transition-transform duration-4000 ease-in-out',
                            breathingCount % 2 === 0 ? 'scale-125' : 'scale-75'
                          )}
                        />
                      </div>
                      
                      <Button
                        variant="outline"
                        size="sm"
                        onClick={() => {
                          setIsBreathing(false)
                          setBreathingCount(0)
                        }}
                      >
                        Stop Exercise
                      </Button>
                    </div>
                  </CardContent>
                </Card>
              </div>
            )}
            
            {/* Start Break Button */}
            <div className="text-center">
              <Button
                onClick={() => startSession(currentConfig.defaultDuration)}
                size="lg"
                className="bg-orange-500 hover:bg-orange-600 text-white px-8 py-3"
              >
                <Coffee className="h-5 w-5 mr-2" />
                Start {currentConfig.defaultDuration}-Minute Break
              </Button>
            </div>
          </div>
        )}
      </div>
    </div>
  )
}
```

## Acceptance Criteria
- [ ] Daily mode with today's prioritized tasks and progress tracking
- [ ] Deep work mode with distraction-free single-task interface
- [ ] Planning mode with calendar integration and project overview
- [ ] Break mode with gentle interface and wellness suggestions  
- [ ] Smooth animated transitions between focus modes
- [ ] Mode-specific UI customizations (colors, layouts, density)
- [ ] Integrated focus timer with session tracking
- [ ] Pomodoro technique support with customizable durations
- [ ] Session notes and productivity ratings
- [ ] Real-time progress tracking and statistics
- [ ] Sound notifications for session start/end/break
- [ ] Keyboard shortcuts for mode switching and timer control
- [ ] Responsive design across all focus modes
- [ ] Accessibility features for timer and mode navigation
- [ ] Auto-suggestions based on current mode context
- [ ] Session history and analytics tracking
- [ ] Integration with task prioritization system
- [ ] Mode preferences persistence across sessions
- [ ] Interruption tracking and handling
- [ ] Break reminders and wellness tips

## Technical Details
- Specialized React components for each focus mode
- Zustand store for focus state management and persistence  
- Custom hooks for session management and timer logic
- Smooth CSS transitions and animations between modes
- Web Audio API integration for focus sounds
- Local storage for session data and preferences
- Real-time timer updates with proper cleanup
- Mode-specific task filtering and display logic
- Responsive layouts optimized for different screen sizes
- Keyboard event handling for shortcuts
- Background gradient and color theming system
- Progressive Web App features for focus notifications

## Dependencies
- [ ] Task 004 completed (Task CRUD operations working)
- [ ] User preferences system available in database
- [ ] Timer and session management infrastructure
- [ ] Audio files for focus mode sounds
- [ ] React Query for session data management

## Effort Estimate
- Size: L
- Hours: 12
- Parallel: false

## Definition of Done
- [ ] All four focus modes implemented with distinct UIs
- [ ] Mode transitions working smoothly with animations
- [ ] Focus timer functionality fully integrated and tested
- [ ] Session tracking and analytics working correctly
- [ ] User preferences saved and restored properly
- [ ] Mode-specific features working as designed
- [ ] Sound notifications implemented and configurable
- [ ] Responsive design tested on mobile and desktop
- [ ] Keyboard shortcuts implemented and documented
- [ ] Accessibility features tested and working
- [ ] Performance optimized for smooth timer updates
- [ ] Integration with task system verified
- [ ] Error handling and edge cases covered
- [ ] Unit tests for focus mode logic written and passing
- [ ] Documentation updated with focus mode API
