<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Couples Therapy Assistant - UI Prototype</title>
  <link rel="stylesheet" href="design-system.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    /* Prototype Navigation - Dark Theme */
    .prototype-nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 260px;
      height: 100vh;
      background: var(--bg-secondary);
      border-right: 1px solid var(--border-subtle);
      overflow-y: auto;
      z-index: 1000;
      padding: var(--space-4);
    }

    .prototype-nav h2 {
      font-size: var(--text-xs);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-tertiary);
      margin-bottom: var(--space-2);
      margin-top: var(--space-6);
      padding-left: var(--space-3);
    }

    .prototype-nav h2:first-of-type {
      margin-top: var(--space-4);
    }

    .prototype-nav a {
      display: block;
      padding: var(--space-2) var(--space-3);
      color: var(--text-secondary);
      text-decoration: none;
      border-radius: var(--radius-md);
      font-size: var(--text-sm);
      transition: all var(--transition-fast);
    }

    .prototype-nav a:hover {
      background: var(--bg-tertiary);
      color: var(--text-primary);
    }

    .prototype-nav a.active {
      background: var(--accent-100);
      color: var(--accent-300);
      font-weight: var(--font-medium);
    }

    .prototype-content {
      margin-left: 260px;
      min-height: 100vh;
      background: var(--bg-primary);
    }

    .screen {
      display: none;
      min-height: 100vh;
    }

    .screen.active {
      display: block;
    }

    /* Screen Container */
    .screen-container {
      max-width: 480px;
      margin: 0 auto;
      padding: var(--space-8) var(--space-4);
    }

    .screen-container.wide {
      max-width: 800px;
    }

    /* App Header */
    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-4) var(--space-6);
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border-subtle);
    }

    .app-logo {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      font-family: var(--font-heading);
      font-weight: var(--font-semibold);
      font-size: var(--text-lg);
      color: var(--text-primary);
    }

    .app-logo-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, var(--accent-400), var(--accent-500));
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-glow);
    }

    /* Auth Screens */
    .auth-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: var(--space-8);
      background: var(--bg-primary);
      position: relative;
    }

    .auth-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(circle at 20% 20%, var(--accent-50) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, var(--warm-50) 0%, transparent 50%);
      pointer-events: none;
    }

    .auth-card {
      position: relative;
      width: 100%;
      max-width: 400px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-2xl);
      padding: var(--space-8);
    }

    .auth-logo {
      text-align: center;
      margin-bottom: var(--space-8);
    }

    .auth-title {
      text-align: center;
      margin-bottom: var(--space-6);
    }

    /* Dashboard */
    .dashboard-grid {
      display: grid;
      gap: var(--space-6);
    }

    @media (min-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    .conflict-item {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      padding: var(--space-4);
      border-bottom: 1px solid var(--border-subtle);
      cursor: pointer;
      transition: background var(--transition-fast);
    }

    .conflict-item:hover {
      background: var(--bg-tertiary);
    }

    .conflict-item:last-child {
      border-bottom: none;
    }

    .conflict-title {
      font-weight: var(--font-medium);
      color: var(--text-primary);
      margin-bottom: var(--space-1);
    }

    .conflict-meta {
      font-size: var(--text-sm);
      color: var(--text-tertiary);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: var(--space-12) var(--space-6);
    }

    .empty-state-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto var(--space-6);
      background: var(--bg-tertiary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--text-3xl);
    }

    /* Guidance Display */
    .guidance-section {
      margin-bottom: var(--space-6);
    }

    .guidance-section-title {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-weight: var(--font-medium);
      color: var(--text-primary);
      margin-bottom: var(--space-3);
    }

    .guidance-section-content {
      padding-left: var(--space-6);
      color: var(--text-secondary);
    }

    .conversation-starter {
      background: var(--accent-50);
      border: 1px solid var(--accent-200);
      padding: var(--space-4);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-3);
    }

    .conversation-starter-label {
      font-size: var(--text-xs);
      font-weight: var(--font-semibold);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--accent-300);
      margin-bottom: var(--space-2);
    }

    .conversation-starter p {
      color: var(--text-primary);
      font-style: italic;
    }

    /* Survey Progress */
    .survey-header {
      margin-bottom: var(--space-8);
    }

    .survey-progress-text {
      display: flex;
      justify-content: space-between;
      font-size: var(--text-sm);
      color: var(--text-tertiary);
      margin-bottom: var(--space-2);
    }

    .survey-question {
      margin-bottom: var(--space-6);
    }

    .survey-question-number {
      font-size: var(--text-xs);
      color: var(--accent-300);
      font-weight: var(--font-medium);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-2);
    }

    .survey-question-text {
      font-size: var(--text-xl);
      font-weight: var(--font-medium);
      color: var(--text-primary);
      margin-bottom: var(--space-6);
    }

    /* Radio/Checkbox Options */
    .option-group {
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
    }

    .option-item {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-4);
      background: var(--bg-tertiary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .option-item:hover {
      border-color: var(--accent-300);
      background: var(--bg-elevated);
    }

    .option-item.selected {
      border-color: var(--accent-300);
      background: var(--accent-50);
    }

    .option-radio {
      width: 20px;
      height: 20px;
      border: 2px solid var(--border-strong);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .option-item.selected .option-radio {
      border-color: var(--accent-300);
    }

    .option-item.selected .option-radio::after {
      content: '';
      width: 10px;
      height: 10px;
      background: var(--accent-300);
      border-radius: var(--radius-full);
    }

    .option-label {
      font-weight: var(--font-medium);
      color: var(--text-primary);
    }

    .option-hint {
      font-size: var(--text-sm);
      color: var(--text-tertiary);
      margin-top: var(--space-1);
    }

    /* Loading State */
    .loading-overlay {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: var(--space-12);
      text-align: center;
    }

    .loading-text {
      margin-top: var(--space-4);
      color: var(--text-primary);
    }

    .loading-subtext {
      font-size: var(--text-sm);
      color: var(--text-tertiary);
      margin-top: var(--space-2);
      max-width: 300px;
    }

    /* Page Footer (Crisis Resources) */
    .page-footer {
      margin-top: auto;
      padding-top: var(--space-8);
    }

    /* Disclaimer */
    .disclaimer {
      text-align: center;
      font-size: var(--text-xs);
      color: var(--text-tertiary);
      padding: var(--space-4);
      border-top: 1px solid var(--border-subtle);
    }

    /* Visibility Toggle */
    .visibility-toggle {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-4);
      background: var(--bg-tertiary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      margin-top: var(--space-4);
    }

    .visibility-icon {
      font-size: var(--text-lg);
    }

    .visibility-text {
      flex: 1;
    }

    .visibility-label {
      font-weight: var(--font-medium);
      color: var(--text-primary);
    }

    .visibility-hint {
      font-size: var(--text-xs);
      color: var(--text-tertiary);
    }

    /* Partner Perspective */
    .partner-perspective {
      padding: var(--space-4);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-4);
      border-left: 3px solid;
    }

    .partner-a {
      background: var(--accent-50);
      border-left-color: var(--accent-300);
    }

    .partner-b {
      background: var(--warm-50);
      border-left-color: var(--warm-300);
    }

    .partner-label {
      font-size: var(--text-xs);
      font-weight: var(--font-semibold);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-2);
    }

    .partner-a .partner-label {
      color: var(--accent-300);
    }

    .partner-b .partner-label {
      color: var(--warm-300);
    }

    .partner-perspective p {
      color: var(--text-secondary);
    }

    /* Pattern Alert */
    .pattern-alert {
      display: flex;
      gap: var(--space-3);
      padding: var(--space-4);
      background: var(--accent-50);
      border: 1px solid var(--accent-200);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-4);
    }

    .pattern-icon {
      font-size: var(--text-lg);
    }

    .pattern-title {
      font-weight: var(--font-medium);
      color: var(--accent-300);
      margin-bottom: var(--space-1);
    }

    .pattern-text {
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }

    /* Feature List */
    .feature-check {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      margin-bottom: var(--space-3);
      color: var(--text-secondary);
    }

    .feature-check span:first-child {
      color: var(--success);
    }

    /* Crisis Cards */
    .crisis-card {
      margin-bottom: var(--space-4);
      border-left: 3px solid;
    }

    .crisis-card.urgent {
      border-left-color: var(--error);
    }

    .crisis-card.warning {
      border-left-color: var(--warning);
    }

    .crisis-card.info {
      border-left-color: var(--accent-300);
    }

    .crisis-number {
      font-size: var(--text-2xl);
      font-weight: var(--font-semibold);
      color: var(--text-primary);
      margin-bottom: var(--space-2);
    }

    /* Chat Interface */
    .chat-container {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 60px);
    }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: var(--space-4);
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .chat-message {
      display: flex;
      gap: var(--space-3);
      max-width: 85%;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .chat-message.user {
      align-self: flex-end;
      flex-direction: row-reverse;
    }

    .chat-message.ai {
      align-self: flex-start;
    }

    .chat-avatar {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--text-sm);
      flex-shrink: 0;
    }

    .chat-avatar.user {
      background: var(--accent-100);
      color: var(--accent-300);
    }

    .chat-avatar.ai {
      background: linear-gradient(135deg, var(--accent-400), var(--accent-500));
      box-shadow: var(--shadow-glow);
    }

    .chat-bubble {
      padding: var(--space-3) var(--space-4);
      border-radius: var(--radius-xl);
      line-height: 1.5;
    }

    .chat-message.user .chat-bubble {
      background: var(--accent-300);
      color: var(--bg-primary);
      border-bottom-right-radius: var(--radius-sm);
    }

    .chat-message.ai .chat-bubble {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border-subtle);
      border-bottom-left-radius: var(--radius-sm);
    }

    .chat-bubble p {
      margin-bottom: var(--space-3);
    }

    .chat-bubble p:last-child {
      margin-bottom: 0;
    }

    .chat-bubble em {
      color: var(--text-tertiary);
      font-style: italic;
    }

    .chat-bubble strong {
      color: var(--accent-300);
      font-weight: var(--font-medium);
    }

    /* Streaming indicator */
    .streaming-indicator {
      display: flex;
      gap: 4px;
      padding: var(--space-2);
    }

    .streaming-indicator span {
      width: 6px;
      height: 6px;
      background: var(--accent-300);
      border-radius: var(--radius-full);
      animation: pulse 1.4s ease-in-out infinite;
    }

    .streaming-indicator span:nth-child(2) { animation-delay: 0.2s; }
    .streaming-indicator span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes pulse {
      0%, 100% { opacity: 0.3; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1); }
    }

    /* Chat Input */
    .chat-input-container {
      padding: var(--space-4);
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-subtle);
    }

    .chat-input-wrapper {
      display: flex;
      gap: var(--space-3);
      align-items: flex-end;
      max-width: 680px;
      margin: 0 auto;
    }

    .chat-input {
      flex: 1;
      padding: var(--space-3) var(--space-4);
      background: var(--bg-tertiary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-xl);
      color: var(--text-primary);
      font-size: var(--text-base);
      resize: none;
      min-height: 44px;
      max-height: 120px;
      transition: border-color var(--transition-fast);
    }

    .chat-input:focus {
      outline: none;
      border-color: var(--accent-300);
    }

    .chat-input::placeholder {
      color: var(--text-tertiary);
    }

    .chat-send-btn {
      width: 44px;
      height: 44px;
      border-radius: var(--radius-full);
      background: var(--accent-300);
      border: none;
      color: var(--bg-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .chat-send-btn:hover {
      background: var(--accent-400);
      transform: scale(1.05);
    }

    .chat-send-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Ready Button */
    .ready-button-container {
      padding: var(--space-4);
      text-align: center;
      background: linear-gradient(to top, var(--bg-secondary), transparent);
    }

    .ready-button {
      padding: var(--space-3) var(--space-6);
      background: var(--sage-300);
      color: var(--bg-primary);
      border: none;
      border-radius: var(--radius-xl);
      font-weight: var(--font-medium);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .ready-button:hover {
      background: var(--sage-400);
      transform: translateY(-2px);
    }

    .ready-hint {
      font-size: var(--text-xs);
      color: var(--text-tertiary);
      margin-top: var(--space-2);
    }

    /* Shared Chat Indicators */
    .shared-chat-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-3);
      padding: var(--space-3);
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-subtle);
    }

    .participant-badge {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      padding: var(--space-1) var(--space-3);
      background: var(--bg-secondary);
      border-radius: var(--radius-full);
      font-size: var(--text-sm);
    }

    .participant-dot {
      width: 8px;
      height: 8px;
      border-radius: var(--radius-full);
    }

    .participant-dot.online {
      background: var(--success);
    }

    .participant-dot.partner-a {
      background: var(--accent-300);
    }

    .participant-dot.partner-b {
      background: var(--warm-300);
    }

    /* Chat message variations for shared chat */
    .chat-message.partner-a .chat-bubble {
      background: var(--accent-100);
      border-color: var(--accent-200);
    }

    .chat-message.partner-b .chat-bubble {
      background: var(--warm-100);
      border-color: var(--warm-200);
    }

    .chat-message .partner-label {
      font-size: var(--text-xs);
      color: var(--text-tertiary);
      margin-bottom: var(--space-1);
    }

    /* Conflict Start Screen */
    .conflict-start-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - 60px);
      padding: var(--space-8);
      text-align: center;
    }

    .conflict-topic-input {
      width: 100%;
      max-width: 400px;
      padding: var(--space-4);
      background: var(--bg-tertiary);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-xl);
      color: var(--text-primary);
      font-size: var(--text-lg);
      text-align: center;
      transition: border-color var(--transition-fast);
    }

    .conflict-topic-input:focus {
      outline: none;
      border-color: var(--accent-300);
    }

    .conflict-topic-input::placeholder {
      color: var(--text-tertiary);
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="prototype-nav">
    <div style="margin-bottom: var(--space-2);">
      <div class="app-logo">
        <div class="app-logo-icon"></div>
        <span>CTA</span>
      </div>
    </div>

    <h2>Authentication</h2>
    <a href="#login" class="active" onclick="showScreen('login')">Login</a>
    <a href="#register" onclick="showScreen('register')">Register</a>
    <a href="#forgot-password" onclick="showScreen('forgot-password')">Forgot Password</a>
    <a href="#accept-invite" onclick="showScreen('accept-invite')">Accept Invitation</a>

    <h2>Onboarding</h2>
    <a href="#intake-start" onclick="showScreen('intake-start')">Intake - Start</a>
    <a href="#intake-questions" onclick="showScreen('intake-questions')">Intake - Questions</a>
    <a href="#intake-complete" onclick="showScreen('intake-complete')">Intake - Complete</a>
    <a href="#invite-partner" onclick="showScreen('invite-partner')">Invite Partner</a>

    <h2>Dashboard</h2>
    <a href="#dashboard-empty" onclick="showScreen('dashboard-empty')">Empty State</a>
    <a href="#dashboard" onclick="showScreen('dashboard')">With Conflicts</a>
    <a href="#dashboard-pending" onclick="showScreen('dashboard-pending')">Partner B View</a>

    <h2>Conflict Flow</h2>
    <a href="#conflict-start" onclick="showScreen('conflict-start')">Start Conflict</a>
    <a href="#exploration-chat" onclick="showScreen('exploration-chat')">Exploration Chat</a>
    <a href="#exploration-ready" onclick="showScreen('exploration-ready')">Ready to Continue</a>
    <a href="#partner-waiting" onclick="showScreen('partner-waiting')">Waiting for Partner</a>
    <a href="#partner-b-chat" onclick="showScreen('partner-b-chat')">Partner B Chat</a>
    <a href="#guidance-chat" onclick="showScreen('guidance-chat')">Guidance (Chat)</a>
    <a href="#shared-chat" onclick="showScreen('shared-chat')">Shared Relationship Chat</a>

    <h2>States</h2>
    <a href="#loading" onclick="showScreen('loading')">Loading</a>
    <a href="#crisis" onclick="showScreen('crisis')">Crisis Resources</a>
  </nav>

  <!-- Main Content -->
  <main class="prototype-content">

    <!-- LOGIN SCREEN -->
    <section id="login" class="screen active">
      <div class="auth-container">
        <div class="auth-card">
          <div class="auth-logo">
            <div class="app-logo" style="justify-content: center;">
              <div class="app-logo-icon" style="width: 48px; height: 48px;"></div>
            </div>
            <p style="margin-top: var(--space-3); color: var(--text-tertiary); font-size: var(--text-sm);">Couples Therapy Assistant</p>
          </div>

          <h1 class="heading-3 auth-title">Welcome back</h1>

          <form class="flex flex-col gap-4">
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-input" placeholder="you@example.com">
            </div>

            <div class="form-group">
              <label class="form-label">Password</label>
              <input type="password" class="form-input" placeholder="Enter your password">
              <a href="#forgot-password" class="form-hint" style="color: var(--accent-300); margin-top: var(--space-2); display: inline-block;">Forgot password?</a>
            </div>

            <button type="submit" class="btn btn-primary btn-lg btn-block" style="margin-top: var(--space-4);">
              Sign In
            </button>
          </form>

          <p style="text-align: center; margin-top: var(--space-6); color: var(--text-tertiary);">
            Don't have an account?
            <a href="#register" style="color: var(--accent-300); font-weight: var(--font-medium);">Sign up</a>
          </p>
        </div>
      </div>
    </section>

    <!-- REGISTER SCREEN -->
    <section id="register" class="screen">
      <div class="auth-container">
        <div class="auth-card">
          <div class="auth-logo">
            <div class="app-logo" style="justify-content: center;">
              <div class="app-logo-icon" style="width: 48px; height: 48px;"></div>
            </div>
          </div>

          <h1 class="heading-3 auth-title">Create your account</h1>
          <p style="text-align: center; margin-bottom: var(--space-6); color: var(--text-tertiary);">
            Start your journey to better communication
          </p>

          <form class="flex flex-col gap-4">
            <div class="form-group">
              <label class="form-label">Full Name</label>
              <input type="text" class="form-input" placeholder="Your name">
            </div>

            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-input" placeholder="you@example.com">
            </div>

            <div class="form-group">
              <label class="form-label">Password</label>
              <input type="password" class="form-input" placeholder="Create a secure password">
              <span class="form-hint">At least 8 characters with a number</span>
            </div>

            <div class="form-group">
              <label class="form-label">Confirm Password</label>
              <input type="password" class="form-input" placeholder="Confirm your password">
            </div>

            <button type="submit" class="btn btn-primary btn-lg btn-block" style="margin-top: var(--space-4);">
              Create Account
            </button>
          </form>

          <p style="text-align: center; margin-top: var(--space-6); color: var(--text-tertiary);">
            Already have an account?
            <a href="#login" style="color: var(--accent-300); font-weight: var(--font-medium);">Sign in</a>
          </p>
        </div>
      </div>
    </section>

    <!-- FORGOT PASSWORD SCREEN -->
    <section id="forgot-password" class="screen">
      <div class="auth-container">
        <div class="auth-card">
          <h1 class="heading-3 auth-title">Reset password</h1>
          <p style="text-align: center; margin-bottom: var(--space-6); color: var(--text-tertiary);">
            Enter your email and we'll send you a link to reset your password.
          </p>

          <form class="flex flex-col gap-4">
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-input" placeholder="you@example.com">
            </div>

            <button type="submit" class="btn btn-primary btn-lg btn-block">
              Send Reset Link
            </button>
          </form>

          <p style="text-align: center; margin-top: var(--space-6);">
            <a href="#login" style="color: var(--accent-300);">Back to login</a>
          </p>
        </div>
      </div>
    </section>

    <!-- ACCEPT INVITATION SCREEN -->
    <section id="accept-invite" class="screen">
      <div class="auth-container">
        <div class="auth-card">
          <div style="text-align: center; margin-bottom: var(--space-6);">
            <div style="font-size: 48px; margin-bottom: var(--space-4);">üíë</div>
            <h1 class="heading-3">You've been invited</h1>
            <p style="color: var(--text-tertiary); margin-top: var(--space-2);">
              <span style="color: var(--accent-300);">Sarah</span> has invited you to join Couples Therapy Assistant
            </p>
          </div>

          <div class="alert alert-info" style="margin-bottom: var(--space-6);">
            <div>
              <strong style="color: var(--text-primary);">How it works</strong>
              <p style="margin-top: var(--space-1);">You'll each describe conflicts from your perspective, then receive personalized guidance to help you communicate better.</p>
            </div>
          </div>

          <form class="flex flex-col gap-4">
            <div class="form-group">
              <label class="form-label">Your Name</label>
              <input type="text" class="form-input" placeholder="Your name">
            </div>

            <div class="form-group">
              <label class="form-label">Create Password</label>
              <input type="password" class="form-input" placeholder="Create a secure password">
            </div>

            <button type="submit" class="btn btn-primary btn-lg btn-block" style="margin-top: var(--space-4);">
              Accept Invitation
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- INTAKE SURVEY - START -->
    <section id="intake-start" class="screen">
      <div class="screen-container">
        <div style="text-align: center; padding: var(--space-12) 0;">
          <div style="font-size: 64px; margin-bottom: var(--space-6);">üå±</div>
          <h1 class="heading-2" style="margin-bottom: var(--space-4);">Let's get to know you</h1>
          <p class="body-large" style="margin-bottom: var(--space-8); max-width: 360px; margin-left: auto; margin-right: auto;">
            This brief survey helps us personalize guidance for your unique relationship. It takes about 5-7 minutes.
          </p>

          <div style="text-align: left; max-width: 300px; margin: 0 auto var(--space-8);">
            <div class="feature-check">
              <span>‚úì</span>
              <span>Your answers are private</span>
            </div>
            <div class="feature-check">
              <span>‚úì</span>
              <span>You can update anytime</span>
            </div>
            <div class="feature-check">
              <span>‚úì</span>
              <span>Helps AI understand your needs</span>
            </div>
          </div>

          <button class="btn btn-primary btn-lg">
            Begin Survey
          </button>
        </div>
      </div>
    </section>

    <!-- INTAKE SURVEY - QUESTIONS -->
    <section id="intake-questions" class="screen">
      <div class="screen-container">
        <div class="survey-header">
          <div class="survey-progress-text">
            <span>Question 5 of 18</span>
            <span>28%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 28%;"></div>
          </div>
        </div>

        <div class="survey-question">
          <div class="survey-question-number">Question 5</div>
          <div class="survey-question-text">What's your primary communication style during disagreements?</div>

          <div class="option-group">
            <div class="option-item">
              <div class="option-radio"></div>
              <div>
                <div class="option-label">Direct</div>
                <div class="option-hint">I express my feelings and needs openly</div>
              </div>
            </div>
            <div class="option-item selected">
              <div class="option-radio"></div>
              <div>
                <div class="option-label">Indirect</div>
                <div class="option-hint">I hint at issues rather than stating them directly</div>
              </div>
            </div>
            <div class="option-item">
              <div class="option-radio"></div>
              <div>
                <div class="option-label">Avoidant</div>
                <div class="option-hint">I tend to withdraw or avoid conflict</div>
              </div>
            </div>
            <div class="option-item">
              <div class="option-radio"></div>
              <div>
                <div class="option-label">Assertive</div>
                <div class="option-hint">I stand firm while respecting others</div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex justify-between" style="margin-top: var(--space-8);">
          <button class="btn btn-ghost">‚Üê Back</button>
          <button class="btn btn-primary">Continue ‚Üí</button>
        </div>
      </div>
    </section>

    <!-- INTAKE SURVEY - COMPLETE -->
    <section id="intake-complete" class="screen">
      <div class="screen-container">
        <div style="text-align: center; padding: var(--space-12) 0;">
          <div style="font-size: 64px; margin-bottom: var(--space-6);">‚ú®</div>
          <h1 class="heading-2" style="margin-bottom: var(--space-4);">Survey complete</h1>
          <p class="body-large" style="margin-bottom: var(--space-8); max-width: 360px; margin-left: auto; margin-right: auto;">
            We now have a better understanding of your relationship dynamics. This will help us provide more personalized guidance.
          </p>

          <div class="card" style="text-align: left; margin-bottom: var(--space-8);">
            <div class="card-body">
              <h3 class="heading-4" style="margin-bottom: var(--space-4);">What's next?</h3>
              <div class="flex items-center gap-4 mb-4">
                <span class="badge badge-primary">1</span>
                <span style="color: var(--text-secondary);">Invite your partner to join</span>
              </div>
              <div class="flex items-center gap-4 mb-4">
                <span class="badge badge-neutral">2</span>
                <span style="color: var(--text-secondary);">They complete their own survey</span>
              </div>
              <div class="flex items-center gap-4">
                <span class="badge badge-neutral">3</span>
                <span style="color: var(--text-secondary);">Start working through conflicts together</span>
              </div>
            </div>
          </div>

          <button class="btn btn-primary btn-lg">
            Invite Your Partner
          </button>
        </div>
      </div>
    </section>

    <!-- INVITE PARTNER -->
    <section id="invite-partner" class="screen">
      <div class="screen-container">
        <h1 class="heading-2" style="margin-bottom: var(--space-2);">Invite your partner</h1>
        <p style="color: var(--text-tertiary); margin-bottom: var(--space-8);">
          Send an invitation so you can work through conflicts together.
        </p>

        <div class="card">
          <div class="card-body">
            <form class="flex flex-col gap-4">
              <div class="form-group">
                <label class="form-label">Partner's Email</label>
                <input type="email" class="form-input" placeholder="partner@example.com">
              </div>

              <div class="form-group">
                <label class="form-label">Personal Message (optional)</label>
                <textarea class="form-input form-textarea" placeholder="Add a personal note to your invitation..."></textarea>
              </div>

              <button type="submit" class="btn btn-primary btn-block">
                Send Invitation
              </button>
            </form>
          </div>
        </div>

        <div class="alert alert-info" style="margin-top: var(--space-6);">
          <div>
            <strong style="color: var(--text-primary);">Note</strong>
            <p style="margin-top: var(--space-1);">Your partner will need to create their own account and complete their intake survey before you can start using the app together.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- DASHBOARD - EMPTY -->
    <section id="dashboard-empty" class="screen">
      <div class="app-header">
        <div class="app-logo">
          <div class="app-logo-icon"></div>
          <span>CTA</span>
        </div>
        <button class="btn btn-ghost btn-sm">Settings</button>
      </div>

      <div class="screen-container wide">
        <div class="empty-state">
          <div class="empty-state-icon">üí¨</div>
          <h2 class="heading-3" style="margin-bottom: var(--space-3);">No conflicts yet</h2>
          <p style="color: var(--text-tertiary); margin-bottom: var(--space-6); max-width: 360px; margin-left: auto; margin-right: auto;">
            When you encounter a disagreement, start here to get personalized guidance for both of you.
          </p>
          <button class="btn btn-primary btn-lg">
            Start New Conflict
          </button>
        </div>
      </div>
    </section>

    <!-- DASHBOARD - WITH CONFLICTS -->
    <section id="dashboard" class="screen">
      <div class="app-header">
        <div class="app-logo">
          <div class="app-logo-icon"></div>
          <span>CTA</span>
        </div>
        <button class="btn btn-ghost btn-sm">Settings</button>
      </div>

      <div class="screen-container wide">
        <div class="flex justify-between items-center" style="margin-bottom: var(--space-6);">
          <h1 class="heading-2">Dashboard</h1>
          <button class="btn btn-primary">+ New Conflict</button>
        </div>

        <div class="dashboard-grid">
          <div class="card">
            <div class="card-header">
              <h3 class="heading-4">In Progress</h3>
            </div>
            <div>
              <div class="conflict-item">
                <div>
                  <div class="conflict-title">Household Chores</div>
                  <div class="conflict-meta">Started Dec 22 ‚Ä¢ Waiting for partner</div>
                </div>
                <span class="badge badge-warning">Pending</span>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h3 class="heading-4">Completed</h3>
            </div>
            <div>
              <div class="conflict-item">
                <div>
                  <div class="conflict-title">Weekend Plans</div>
                  <div class="conflict-meta">Completed Dec 20</div>
                </div>
                <span class="badge badge-success">Done</span>
              </div>
              <div class="conflict-item">
                <div>
                  <div class="conflict-title">Budget Discussion</div>
                  <div class="conflict-meta">Completed Dec 15</div>
                </div>
                <span class="badge badge-success">Done</span>
              </div>
            </div>
          </div>
        </div>

        <div class="pattern-alert" style="margin-top: var(--space-6);">
          <div class="pattern-icon">üìä</div>
          <div>
            <div class="pattern-title">Pattern Detected</div>
            <div class="pattern-text">This is the 3rd time "household responsibilities" has come up in the past 30 days. Consider scheduling a dedicated conversation about this topic.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- DASHBOARD - PARTNER B PENDING -->
    <section id="dashboard-pending" class="screen">
      <div class="app-header">
        <div class="app-logo">
          <div class="app-logo-icon"></div>
          <span>CTA</span>
        </div>
        <button class="btn btn-ghost btn-sm">Settings</button>
      </div>

      <div class="screen-container wide">
        <div class="flex justify-between items-center" style="margin-bottom: var(--space-6);">
          <h1 class="heading-2">Dashboard</h1>
        </div>

        <div class="alert alert-info" style="margin-bottom: var(--space-6);">
          <div>
            <strong style="color: var(--text-primary);">Action needed</strong>
            <p style="margin-top: var(--space-1);">Sarah has described a conflict and is waiting for your perspective. Respond to receive personalized guidance.</p>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="heading-4">Needs Your Response</h3>
          </div>
          <div>
            <div class="conflict-item">
              <div>
                <div class="conflict-title">Household Chores</div>
                <div class="conflict-meta">Sarah started this Dec 22</div>
              </div>
              <button class="btn btn-primary btn-sm">Respond</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONFLICT START -->
    <section id="conflict-start" class="screen">
      <div class="app-header">
        <a href="#dashboard" class="btn btn-ghost btn-sm">‚Üê Back</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">New Conflict</span>
        <div style="width: 60px;"></div>
      </div>

      <div class="conflict-start-container">
        <div style="font-size: 64px; margin-bottom: var(--space-6);">üí≠</div>
        <h1 class="heading-2" style="margin-bottom: var(--space-3);">What's on your mind?</h1>
        <p style="color: var(--text-tertiary); margin-bottom: var(--space-8); max-width: 360px;">
          Give this topic a short name. You'll chat with me about it next.
        </p>

        <input type="text" class="conflict-topic-input" placeholder="e.g., Household responsibilities" value="">

        <div style="margin-top: var(--space-8);">
          <button class="btn btn-primary btn-lg">
            Start Conversation
          </button>
        </div>

        <p style="font-size: var(--text-sm); color: var(--text-tertiary); margin-top: var(--space-6); max-width: 320px;">
          Your partner will have their own private conversation about this topic before either of you see each other's responses.
        </p>
      </div>
    </section>

    <!-- EXPLORATION CHAT - Partner A chatting with AI -->
    <section id="exploration-chat" class="screen">
      <div class="app-header">
        <a href="#dashboard" class="btn btn-ghost btn-sm">‚Üê Exit</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">Household Chores</span>
        <span class="badge badge-primary" style="font-size: 10px;">Exploration</span>
      </div>

      <div class="chat-container">
        <div class="chat-messages" style="max-width: 680px; margin: 0 auto;">
          <!-- AI greeting -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>Hi there. I understand you want to talk about <strong>household chores</strong>.</p>
              <p>I'm here to help you explore your feelings and perspective. This conversation is private‚Äîyour partner won't see what we discuss here.</p>
              <p><em>What's been on your mind about this topic?</em></p>
            </div>
          </div>

          <!-- User message -->
          <div class="chat-message user">
            <div class="chat-avatar user">S</div>
            <div class="chat-bubble">
              I feel like I'm doing most of the housework, especially during the week. When I come home from work, the dishes are piled up and laundry isn't done.
            </div>
          </div>

          <!-- AI response -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>That sounds exhausting‚Äîcoming home after work and facing more work. It makes sense that would be draining.</p>
              <p>When you see the dishes piled up, what feelings come up for you? And have you talked to your partner about this before?</p>
            </div>
          </div>

          <!-- User message -->
          <div class="chat-message user">
            <div class="chat-avatar user">S</div>
            <div class="chat-bubble">
              I've mentioned it before but nothing seems to change. It makes me feel unappreciated and exhausted. Like my efforts don't matter.
            </div>
          </div>

          <!-- AI response -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>Feeling unappreciated is really hard, especially when you've already tried to communicate about it. That sense of your efforts not mattering can be deeply lonely.</p>
              <p>I'm hearing a few things:</p>
              <p>‚Ä¢ <strong>Frustration</strong> about the imbalance<br>‚Ä¢ <strong>Exhaustion</strong> from carrying extra weight<br>‚Ä¢ A need to feel <strong>seen and valued</strong></p>
              <p><em>Does that resonate with you? Is there anything else underneath those feelings?</em></p>
            </div>
          </div>

          <!-- User message -->
          <div class="chat-message user">
            <div class="chat-avatar user">S</div>
            <div class="chat-bubble">
              Yes, exactly. I think part of it is that I feel like I'm the only one who notices when things need to be done. It's not just doing the chores‚Äîit's the mental load of always being the one who has to notice and initiate.
            </div>
          </div>

          <!-- AI response with streaming indicator -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>The mental load‚Äîthat's such an important distinction. It's exhausting to be the "manager" of the household even when you're also doing the work.</p>
              <p>It sounds like what you really need is a <strong>true partner</strong> in this‚Äîsomeone who notices and acts without being asked.</p>
              <p>When you're ready, let me know and we can wrap up this exploration. I'll use what you've shared to help create personalized guidance once your partner has also had their conversation.</p>
            </div>
          </div>
        </div>

        <!-- Ready button appears after sufficient exploration -->
        <div class="ready-button-container">
          <button class="ready-button" onclick="showScreen('exploration-ready')">
            ‚úì I'm Ready to Continue
          </button>
          <p class="ready-hint">Click when you feel you've shared enough about your perspective</p>
        </div>

        <div class="chat-input-container">
          <div class="chat-input-wrapper">
            <textarea class="chat-input" placeholder="Type your message..." rows="1"></textarea>
            <button class="chat-send-btn">‚Üí</button>
          </div>
        </div>
      </div>
    </section>

    <!-- EXPLORATION READY - Confirmation -->
    <section id="exploration-ready" class="screen">
      <div class="app-header">
        <a href="#exploration-chat" class="btn btn-ghost btn-sm">‚Üê Back to Chat</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">Household Chores</span>
        <div style="width: 60px;"></div>
      </div>

      <div class="conflict-start-container">
        <div style="font-size: 64px; margin-bottom: var(--space-6);">‚ú®</div>
        <h1 class="heading-2" style="margin-bottom: var(--space-3);">Exploration complete</h1>
        <p style="color: var(--text-tertiary); margin-bottom: var(--space-6); max-width: 400px;">
          Thank you for sharing your perspective. Here's a summary of what I understood:
        </p>

        <div class="card" style="max-width: 440px; text-align: left; margin-bottom: var(--space-6);">
          <div class="card-body">
            <div style="margin-bottom: var(--space-4);">
              <div style="font-size: var(--text-xs); color: var(--accent-300); font-weight: var(--font-medium); margin-bottom: var(--space-1);">CORE FEELINGS</div>
              <p style="color: var(--text-secondary);">Frustration, exhaustion, feeling unappreciated</p>
            </div>
            <div style="margin-bottom: var(--space-4);">
              <div style="font-size: var(--text-xs); color: var(--accent-300); font-weight: var(--font-medium); margin-bottom: var(--space-1);">UNDERLYING NEED</div>
              <p style="color: var(--text-secondary);">To feel seen, valued, and have a true partner in household management</p>
            </div>
            <div>
              <div style="font-size: var(--text-xs); color: var(--accent-300); font-weight: var(--font-medium); margin-bottom: var(--space-1);">KEY CONCERN</div>
              <p style="color: var(--text-secondary);">The mental load of always having to notice and initiate</p>
            </div>
          </div>
        </div>

        <button class="btn btn-primary btn-lg" onclick="showScreen('partner-waiting')">
          Confirm & Notify Partner
        </button>

        <p style="font-size: var(--text-sm); color: var(--text-tertiary); margin-top: var(--space-4);">
          <a href="#exploration-chat" style="color: var(--accent-300);">‚Üê Continue chatting</a> if you want to add more
        </p>
      </div>
    </section>

    <!-- WAITING FOR PARTNER -->
    <section id="partner-waiting" class="screen">
      <div class="app-header">
        <a href="#dashboard" class="btn btn-ghost btn-sm">‚Üê Dashboard</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">Household Chores</span>
        <div style="width: 60px;"></div>
      </div>

      <div class="conflict-start-container">
        <div class="spinner spinner-lg" style="margin-bottom: var(--space-6);"></div>
        <h1 class="heading-2" style="margin-bottom: var(--space-3);">Waiting for your partner</h1>
        <p style="color: var(--text-tertiary); margin-bottom: var(--space-6); max-width: 360px;">
          We've notified James about this topic. Once they complete their exploration, you'll both receive personalized guidance.
        </p>

        <div class="card" style="max-width: 400px; text-align: left;">
          <div class="card-body">
            <div style="display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-3);">
              <div style="width: 12px; height: 12px; background: var(--success); border-radius: var(--radius-full);"></div>
              <span style="color: var(--text-secondary);">Your exploration: Complete</span>
            </div>
            <div style="display: flex; align-items: center; gap: var(--space-3);">
              <div style="width: 12px; height: 12px; background: var(--warning); border-radius: var(--radius-full);"></div>
              <span style="color: var(--text-secondary);">James's exploration: Pending</span>
            </div>
          </div>
        </div>

        <p style="font-size: var(--text-sm); color: var(--text-tertiary); margin-top: var(--space-6);">
          We'll notify you when guidance is ready
        </p>
      </div>
    </section>

    <!-- PARTNER B EXPLORATION CHAT (Blind Input) -->
    <section id="partner-b-chat" class="screen">
      <div class="app-header">
        <a href="#dashboard-pending" class="btn btn-ghost btn-sm">‚Üê Exit</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">Household Chores</span>
        <span class="badge badge-warning" style="font-size: 10px;">Your Turn</span>
      </div>

      <div class="chat-container">
        <div class="chat-messages" style="max-width: 680px; margin: 0 auto;">
          <!-- AI greeting for Partner B -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>Hi James. Sarah has started a conversation about <strong>household chores</strong>.</p>
              <p>Before you see what Sarah shared, I'd like to hear your perspective. This helps ensure your thoughts are authentic and not influenced by their view.</p>
              <p><em>What comes to mind when you think about this topic?</em></p>
            </div>
          </div>

          <!-- User message -->
          <div class="chat-message user">
            <div class="chat-avatar user">J</div>
            <div class="chat-bubble">
              I know the house gets messy sometimes, but I've been really stressed with work lately. There's a big project I'm leading and it's been consuming all my energy.
            </div>
          </div>

          <!-- AI response -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>That sounds like a lot of pressure. When work takes over like that, it can be hard to have energy for anything else.</p>
              <p>How do you feel about the household situation? And how do you think Sarah might be experiencing this?</p>
            </div>
          </div>

          <!-- User message -->
          <div class="chat-message user">
            <div class="chat-avatar user">J</div>
            <div class="chat-bubble">
              Honestly, I try to help on weekends but it never seems like enough. I feel guilty about it, but I'm also frustrated because it feels like my work stress isn't being acknowledged.
            </div>
          </div>

          <!-- AI response -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>I hear both guilt and frustration there‚Äîthat's a difficult combination. You're trying to contribute while also needing your own challenges to be seen.</p>
              <p>It sounds like you might be experiencing:</p>
              <p>‚Ä¢ <strong>Guilt</strong> about not doing more<br>‚Ä¢ <strong>Frustration</strong> that your stress isn't recognized<br>‚Ä¢ A desire for <strong>mutual understanding</strong></p>
              <p><em>When you're ready, we can wrap up and I'll help create guidance for both of you.</em></p>
            </div>
          </div>
        </div>

        <div class="ready-button-container">
          <button class="ready-button" onclick="showScreen('guidance-chat')">
            ‚úì I'm Ready to Continue
          </button>
          <p class="ready-hint">Click when you feel you've shared enough about your perspective</p>
        </div>

        <div class="chat-input-container">
          <div class="chat-input-wrapper">
            <textarea class="chat-input" placeholder="Type your message..." rows="1"></textarea>
            <button class="chat-send-btn">‚Üí</button>
          </div>
        </div>
      </div>
    </section>

    <!-- GUIDANCE CHAT - AI delivers guidance as chat -->
    <section id="guidance-chat" class="screen">
      <div class="app-header">
        <a href="#dashboard" class="btn btn-ghost btn-sm">‚Üê Dashboard</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">Household Chores</span>
        <span class="badge" style="background: var(--sage-100); color: var(--sage-300); font-size: 10px;">Guidance</span>
      </div>

      <div class="chat-container">
        <div class="chat-messages" style="max-width: 680px; margin: 0 auto;">
          <!-- AI introduction -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>Thank you both for sharing your perspectives. I've reviewed what each of you shared, and I want to help you understand each other better.</p>
              <p><em>This guidance is personalized for you, James. Sarah is receiving her own version.</em></p>
            </div>
          </div>

          <!-- Guidance message 1 -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p><strong>What Sarah shared:</strong></p>
              <p>Sarah is feeling exhausted and unappreciated. The core issue isn't just the physical chores‚Äîit's the <strong>mental load</strong> of always being the one to notice what needs to be done and initiate action.</p>
              <p>When she sees dishes piled up, she experiences it as evidence that her efforts aren't valued.</p>
            </div>
          </div>

          <!-- Guidance message 2 -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p><strong>What you might not realize:</strong></p>
              <p>Sarah's frustration when you say "just ask me to help" comes from the exhaustion of being the household manager. She needs a partner who notices and acts‚Äînot an assistant who waits for instructions.</p>
            </div>
          </div>

          <!-- Guidance message 3 -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p><strong>Bridging the gap:</strong></p>
              <p>Your work stress is real and valid. But here's the thing: Sarah's home stress is equally real. The challenge is that your stressors have become invisible to each other.</p>
              <p>Consider acknowledging her experience <em>before</em> explaining your work situation. Try:</p>
              <p style="background: var(--accent-50); padding: var(--space-3); border-radius: var(--radius-lg); margin-top: var(--space-2);">
                <em>"I see how much you've been handling at home, and I'm sorry it's felt unbalanced. Work has been overwhelming, but that's not an excuse. Can we figure out a better system together?"</em>
              </p>
            </div>
          </div>

          <!-- User can respond -->
          <div class="chat-message user">
            <div class="chat-avatar user">J</div>
            <div class="chat-bubble">
              That makes sense. I didn't realize it was about the mental load specifically. What are some concrete things I can do differently?
            </div>
          </div>

          <!-- AI continues guidance -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>Great question. Here are some practical steps:</p>
              <p>1. <strong>Claim ownership</strong> of specific tasks entirely‚Äînot "I'll help with laundry" but "Laundry is mine"</p>
              <p>2. <strong>Notice proactively</strong>‚Äîlook around each evening and pick one thing to handle without being asked</p>
              <p>3. <strong>Schedule a weekly check-in</strong>‚Äî10 minutes to discuss what's working and adjust</p>
              <p>Would you like to move to a shared conversation where you and Sarah can discuss this together with my help?</p>
            </div>
          </div>
        </div>

        <div class="ready-button-container">
          <button class="ready-button" onclick="showScreen('shared-chat')">
            Join Shared Conversation
          </button>
          <p class="ready-hint">Sarah is also ready to join</p>
        </div>

        <div class="chat-input-container">
          <div class="chat-input-wrapper">
            <textarea class="chat-input" placeholder="Ask follow-up questions..." rows="1"></textarea>
            <button class="chat-send-btn">‚Üí</button>
          </div>
        </div>
      </div>
    </section>

    <!-- SHARED RELATIONSHIP CHAT -->
    <section id="shared-chat" class="screen">
      <div class="app-header">
        <a href="#dashboard" class="btn btn-ghost btn-sm">‚Üê Exit</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">Household Chores</span>
        <span class="badge" style="background: var(--warm-100); color: var(--warm-300); font-size: 10px;">Shared</span>
      </div>

      <div class="shared-chat-header">
        <div class="participant-badge">
          <span class="participant-dot partner-a"></span>
          <span style="color: var(--text-secondary);">Sarah</span>
        </div>
        <div class="participant-badge">
          <span class="participant-dot partner-b"></span>
          <span style="color: var(--text-secondary);">James</span>
        </div>
        <div class="participant-badge">
          <span class="participant-dot online"></span>
          <span style="color: var(--text-secondary);">AI Therapist</span>
        </div>
      </div>

      <div class="chat-container" style="height: calc(100vh - 120px);">
        <div class="chat-messages" style="max-width: 680px; margin: 0 auto;">
          <!-- AI welcome -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>Welcome to your shared conversation. You've both done the important work of exploring your individual perspectives.</p>
              <p>This is a space for both of you to discuss together. I'm here to help facilitate and offer guidance when needed.</p>
            </div>
          </div>

          <!-- AI summary -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p><strong>What I've learned:</strong></p>
              <p>You're both feeling stretched thin‚ÄîSarah at home, James at work. Neither of you is wrong. The challenge is that your stressors have become invisible to each other.</p>
              <p><em>Sarah, would you like to start by sharing what feels most important to you?</em></p>
            </div>
          </div>

          <!-- Partner A message -->
          <div class="chat-message partner-a">
            <div class="chat-avatar" style="background: var(--accent-100); color: var(--accent-300);">S</div>
            <div>
              <div class="partner-label">Sarah</div>
              <div class="chat-bubble">
                I want you to know it's not about the chores themselves. It's that I feel like I'm the only one who sees what needs to be done. The mental load of managing everything is exhausting.
              </div>
            </div>
          </div>

          <!-- Partner B message -->
          <div class="chat-message partner-b">
            <div class="chat-avatar" style="background: var(--warm-100); color: var(--warm-300);">J</div>
            <div>
              <div class="partner-label">James</div>
              <div class="chat-bubble">
                I hear you. I honestly didn't realize how much you were carrying beyond just the physical tasks. I've been so wrapped up in work that I wasn't seeing the full picture.
              </div>
            </div>
          </div>

          <!-- AI facilitation -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>James, that acknowledgment is really meaningful. Sarah, how does it feel to hear that?</p>
            </div>
          </div>

          <!-- Partner A response -->
          <div class="chat-message partner-a">
            <div class="chat-avatar" style="background: var(--accent-100); color: var(--accent-300);">S</div>
            <div>
              <div class="partner-label">Sarah</div>
              <div class="chat-bubble">
                It helps. I also want to acknowledge that your work stress is real. I think I've been dismissing it because I feel so overwhelmed myself.
              </div>
            </div>
          </div>

          <!-- AI guidance -->
          <div class="chat-message ai">
            <div class="chat-avatar ai">ü§ñ</div>
            <div class="chat-bubble">
              <p>This is beautiful‚Äîyou're both making space for each other's experiences. That's the foundation for finding a solution.</p>
              <p><strong>A suggestion:</strong> What if you each "claimed" specific household responsibilities entirely? Not "helping" with tasks, but owning them. Would you like to try mapping this out together?</p>
            </div>
          </div>
        </div>

        <div class="chat-input-container">
          <div class="chat-input-wrapper">
            <textarea class="chat-input" placeholder="Share with your partner..." rows="1"></textarea>
            <button class="chat-send-btn">‚Üí</button>
          </div>
        </div>
      </div>

      <!-- Crisis footer for shared chat -->
      <div style="padding: var(--space-4); background: var(--bg-secondary); border-top: 1px solid var(--border-subtle);">
        <div style="max-width: 680px; margin: 0 auto;">
          <div class="crisis-footer" style="font-size: var(--text-xs);">
            <span style="color: var(--error);">üÜò Crisis?</span>
            <span style="color: var(--text-tertiary);">988 (Suicide Prevention) ‚Ä¢ 1-800-799-7233 (DV Hotline)</span>
          </div>
        </div>
      </div>
    </section>

    <!-- LOADING STATE -->
    <section id="loading" class="screen">
      <div class="screen-container">
        <div class="loading-overlay">
          <div class="spinner spinner-lg"></div>
          <div class="loading-text heading-4">Generating Your Guidance</div>
          <div class="loading-subtext">Our AI is analyzing your perspectives and preparing personalized insights...</div>
        </div>

        <div style="margin-top: var(--space-8);">
          <h3 class="heading-4" style="margin-bottom: var(--space-4);">Loading Variations</h3>

          <div class="card" style="margin-bottom: var(--space-4);">
            <div class="card-body">
              <div class="skeleton" style="height: 20px; width: 60%; margin-bottom: var(--space-3);"></div>
              <div class="skeleton" style="height: 16px; width: 100%; margin-bottom: var(--space-2);"></div>
              <div class="skeleton" style="height: 16px; width: 90%; margin-bottom: var(--space-2);"></div>
              <div class="skeleton" style="height: 16px; width: 75%;"></div>
            </div>
          </div>

          <div class="flex items-center gap-4">
            <div class="spinner"></div>
            <span style="color: var(--text-secondary);">Processing...</span>
          </div>
        </div>
      </div>
    </section>

    <!-- CRISIS RESOURCES -->
    <section id="crisis" class="screen">
      <div class="app-header">
        <a href="#dashboard" class="btn btn-ghost btn-sm">‚Üê Back</a>
        <span style="font-weight: var(--font-medium); color: var(--text-primary);">Crisis Resources</span>
        <div style="width: 60px;"></div>
      </div>

      <div class="screen-container">
        <div style="text-align: center; margin-bottom: var(--space-8);">
          <div style="font-size: 48px; margin-bottom: var(--space-4);">‚ù§Ô∏è‚Äçü©π</div>
          <h1 class="heading-2">You're not alone</h1>
          <p style="color: var(--text-tertiary);">Help is available 24/7. Reach out if you need support.</p>
        </div>

        <div class="card crisis-card urgent" style="margin-bottom: var(--space-4);">
          <div class="card-body">
            <h3 class="heading-4" style="color: var(--error); margin-bottom: var(--space-3);">Suicide Prevention</h3>
            <p class="crisis-number">988</p>
            <p class="body-small" style="color: var(--text-tertiary);">National Suicide Prevention Lifeline (US)<br>Available 24/7 by phone or chat</p>
          </div>
        </div>

        <div class="card crisis-card warning" style="margin-bottom: var(--space-4);">
          <div class="card-body">
            <h3 class="heading-4" style="color: var(--warning); margin-bottom: var(--space-3);">Domestic Violence</h3>
            <p class="crisis-number">1-800-799-7233</p>
            <p class="body-small" style="color: var(--text-tertiary);">National Domestic Violence Hotline<br>Available 24/7, confidential support</p>
          </div>
        </div>

        <div class="card crisis-card info" style="margin-bottom: var(--space-4);">
          <div class="card-body">
            <h3 class="heading-4" style="color: var(--accent-300); margin-bottom: var(--space-3);">Crisis Text Line</h3>
            <p class="crisis-number" style="font-size: var(--text-xl);">Text HOME to 741741</p>
            <p class="body-small" style="color: var(--text-tertiary);">Free, 24/7 crisis counseling via text</p>
          </div>
        </div>

        <div class="alert alert-info" style="margin-top: var(--space-6);">
          <div>
            <strong style="color: var(--text-primary);">Remember</strong>
            <p style="margin-top: var(--space-1);">Seeking help is a sign of strength. These services are free, confidential, and staffed by trained professionals who care.</p>
          </div>
        </div>
      </div>
    </section>

  </main>

  <script>
    function showScreen(screenId) {
      // Hide all screens
      document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
      });

      // Show selected screen
      document.getElementById(screenId).classList.add('active');

      // Update nav
      document.querySelectorAll('.prototype-nav a').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + screenId) {
          link.classList.add('active');
        }
      });
    }

    // Handle hash changes
    window.addEventListener('hashchange', () => {
      const hash = window.location.hash.substring(1);
      if (hash) {
        showScreen(hash);
      }
    });

    // Check initial hash
    if (window.location.hash) {
      showScreen(window.location.hash.substring(1));
    }
  </script>
</body>
</html>
